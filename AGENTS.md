# リポジトリのガイドライン

## プロジェクト構造とモジュール構成

TypeScriptのソースは`src/`にある。新しいユーティリティが作成された場合、共有ヘルパーは `src/common` に置く。コンパイルされたJavaScriptは `_dist/` に出力され、RMMZがプラグインをロードできるように `src/` をミラーする。RMMZのAPIが不足している場合は、`furamon.d.ts`を拡張する。モック画像などのアセットはリポジトリルート（例：`_dummy.png`）にあり、テストビルド専用である。

## ビルドと開発コマンド

pnpm install`を実行して依存関係を設定する。pnpm tsc` を使用して、配布可能なプラグインを `_dist/` に生成する。繰り返し作業中は `pnpm tsc --watch` によって `_dist/` の同期を保つ。ビルドが成功したら、`xcopy /Y . \_dist* .. \srcjsplugins\\Furamon` で `_dist/*.js` を RMMZ プロジェクトにコピーする。型定義を編集するときは、`pnpm tsc --pretty false` を実行するとエラーが素早く表示される。

## コーディングスタイルと命名規則

RMMZの純正APIをターゲットとしたTypeScriptで記述する。パブリック関数の戻り値は明示的に指定する。変数やメソッドにはキャメルケース、クラスにはパスカルケースを使用し、既存のプラグインファイルの接頭辞（`Furamon_*.ts`）に合わせる。上流のスクリプトに合わせるため、2スペース・インデントを維持する。関連するブロックの上に簡潔なコメントを記述する。

## テストガイドライン

コンパイルしたプラグインをRMMZサンドボックスプロジェクトにロードし、影響を受けるコマンドやシーンを実行することで、変更を検証する。ビヘイビアを追加するときは、ゲーム内のコンソール（`console.log`）に結果を記録し、コミットする前に一時的なロギングを削除する。他の人が再現できるように、プルリクエストの説明に手動検証ステップを記述する。

## コミットとプルリクエストのガイドライン

このリポジトリのコミットは短く、説明的で、頻繁に日本語化される。該当する場合は、issue ID を参照すること。プルリクエストは問題点、解決策、手動テストの範囲を説明し、UI の変更については変更前/変更後のスクリーンショットを含めること。プラグインがTypeScriptのエラーなしにきれいに動作するようになったら、レビューをリクエストすること。
